<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
    <p>
        第1走者情報<button id="submit1">反映</button>
        <button id="start1">スタート</button><button id="stop1" disabled>ストップ</button><br>
        名前:<input id="name1" type="text"><br>
        ゲーム名:<input id="game1" type="text"><br>
        カテゴリ:<input id="category1" type="text"><br>
        目標タイム:<input id="target1" type="text"><br>
        持ち時間:<input id="limit1" type="text">
    </p>
    
</body>
<script>
    const name1 = document.getElementById("name1");
    const game1 = document.getElementById("game1");
    const category1 = document.getElementById("category1");
    const target1 = document.getElementById("target1");
    const limit1 = document.getElementById("limit1");
    const name1Rep = nodecg.Replicant("name1");
    const game1Rep = nodecg.Replicant("game1");
    const category1Rep = nodecg.Replicant("category1");
    const target1Rep = nodecg.Replicant("target1");
    const limit1Rep = nodecg.Replicant("limit1");
    const progress1Rep = nodecg.Replicant("progress1");
    submit1.onclick = () => {
        name1Rep.value = name1.value;
        game1Rep.value = game1.value;
        category1Rep.value = category1.value;
        target1Rep.value = target1.value;
        limit1Rep.value = limit1.value;
        progress1Rep.value = 100;
        set_limit = limit1.value;
        max_limit = limit1.value;
    }
    start1.onclick = () => {
        document.getElementById("start1").disabled = true;
        document.getElementById("stop1").disabled = false;
        startTimer();
    }
    stop1.onclick = () => {
        document.getElementById("stop1").disabled = true;
        document.getElementById("start1").disabled = false;
        stopTimer();
    }
    const time1Rep = nodecg.Replicant("time1");
    var count = 0;
    var items = [
        "0番目の配列",
        "1番目の配列",
        "2番目の配列",
        "3番目の配列",
        "4番目の配列"
    ]
    var item_change = function() {
        time1Rep.value = items[count]
        if (count == items.length - 1) {
            count = 0;
        } else {
            count++;
        }
    }
    setInterval(item_change, 5000);

    var set_limit = 0;
    function startTimer() {
        count_down = setInterval(function() {
            if (set_limit != 0) {
                set_limit--;
            }
            limit1Rep.value = set_limit;
            set_per = set_limit / max_limit * 100;
            progress1Rep.value = set_per;
        }, 1000);
    }
    function stopTimer() {
        clearInterval(count_down)
    }
</script>
</html>